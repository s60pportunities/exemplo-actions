name: Exercicio 01
on:
  workflow_dispatch:
jobs:
  lint:
    name: Lint
    runs-on: ubuntu-latest
    steps:
      - name: Lint
        run: |
          echo "Lint ${{ github.event.inputs.NAME }} and ${{ github.event.inputs.SOME_VALUE }}!"
  build:
    needs: lint
    name: build
    runs-on: ubuntu-latest
    steps:
      - name: Lint
        run: |
          echo "Build ${{ github.event.inputs.NAME }} and ${{ github.event.inputs.SOME_VALUE }}!"
  deploy:
    needs: build
    name: deploy
    runs-on: ubuntu-latest
    steps:
      - name: Lint
        run: |
          echo "Deploy ${{ github.event.inputs.NAME }} and ${{ github.event.inputs.SOME_VALUE }}!"
   
  create-issue:
    environment: DESENVOLVIMENTO
    needs: deploy
    name: create-issue
    runs-on: ubuntu-latest
    steps:
      - name: Obter data atual
        id: get-date
        run: echo "date=$(date -u '+%Y-%m-%d %H:%M:%S')" >> $GITHUB_ENV
        
      - name: Checar o repositÃ³rio
        uses: actions/checkout@v4
        
      - name: Configurar GitHub CLI
        run: |
          gh auth login --with-token <<< "${{ secrets.TOKEN_PROJETO }}"
        
      - name: Criar Issue no RepositÃ³rio
        run: |
               gh issue create --title "Nova Issue para Desenvolvimento" \
                          --project "PROJETO" \
                          --label "bug" \
                          --body "ðŸ“… **Data de criaÃ§Ã£o:** ${{ env.date }} UTC: </br>ðŸš€ Esta issue foi criada automaticamente apÃ³s um push na branch de desenvolvimento." \
                          --repo ${{ github.repository }}   
  
